---
phase: 08.2-pre-release-ux-completion
plan: "01"
subsystem: settings-ux
status: Complete
tags: [word-tracker, suggestions, exclusion, settings, persistence]

dependency-graph:
  requires: []
  provides: [suggestion-exclusion]
  affects: [08.2-02, 08.2-03, 08.2-04]

tech-stack:
  added: []
  patterns: [settings-key-value-persistence, optimistic-ui-state]

key-files:
  created: []
  modified:
    - src/components/pages/SettingsPage.tsx

decisions:
  - "Persist excluded words as JSON array under settings key suggestion_excluded_words"
  - "Optimistic UI: remove word from suggestions list immediately on exclude click"
  - "Pass excludedSuggestions set to extractTopWords so reloaded suggestions also respect exclusions"

metrics:
  duration: "~2 min"
  completed: "2026-02-24"
---

# Phase 8.2 Plan 01: Suggestion Exclusion Summary

**One-liner:** Added per-word × exclude button to Wort-Tracker suggestion chips, persisting exclusions via `suggestion_excluded_words` settings key.

## Tasks Completed

| # | Task | Commit | Files |
|---|------|--------|-------|
| 1 | Add suggestion exclusion to SettingsPage.tsx | be776a0 | src/components/pages/SettingsPage.tsx |

## What Was Built

- **`excludedSuggestions` state** (`Set<string>`): loaded from `suggestion_excluded_words` in DB on mount
- **`handleExcludeSuggestion(word)`**: adds word to excluded set, removes it from visible suggestions optimistically, persists updated set to DB
- **`handleLoadSuggestions` updated**: passes `excludedSuggestions` to `extractTopWords` so re-loading suggestions also filters out previously excluded words
- **Suggestion chip redesign**: each chip is now a `<span>` containing two buttons — a click-to-add button (word + count) and a × button that calls `handleExcludeSuggestion`

## Decisions Made

- Persist as JSON array (`["word1","word2"]`) under key `suggestion_excluded_words` — consistent with other settings table values
- Optimistic removal from suggestion list on exclude click (no full reload needed)
- `extractTopWords` already accepted `customExcluded: Set<string>` — wired it to the new state (was previously always `new Set()`)

## Verification

- `grep "suggestion_excluded_words"` shows key used at lines 260 and 317
- `grep "handleExcludeSuggestion"` shows handler at lines 312 and 428
- `npx tsc --noEmit` passes with no errors

## Deviations from Plan

None — plan executed exactly as written.
